#!/bin/bash

# Convert config_file to an absolute path, relative to the script's directory
base_dir=$(dirname $(dirname $(realpath "$0")))
config_file=$(realpath "$base_dir/$config_file")

echo $base_dir

certs_dir=$base_dir/browser/server/certs

# Check if the directory exists and create it if not
if [ ! -d "$certs_dir" ]; then
  mkdir -p "$certs_dir"
fi

openssl req -x509 -newkey rsa:4096 -nodes \
    -out $certs_dir/cert.pem \
    -keyout $certs_dir/key.pem -days 365 -config openssl.config
